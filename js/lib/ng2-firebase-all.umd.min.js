!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require(void 0),require(void 0)):"function"==typeof define&&define.amd?define(["@angular/core","rxjs/Rx"],t):"object"==typeof exports?exports.ng2Firebase=t(require("@angular/core"),require("rxjs/Rx")):e.ng2Firebase=t(e.ng.core,e.Rx)}(this,function(e,t){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function i(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}i(r(1)),i(r(4)),i(r(7)),i(r(3)),i(r(6)),i(r(8))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,a=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(3>o?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},o=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=r(2),c=r(3),s=r(4),u=r(6),f=function(){function e(e){if(!e)throw new Error("You must provide either a firebase configuration object or a firebase instance");e.url?this._firebase=new Firebase(e.url):this._firebase=e}return Object.defineProperty(e.prototype,"firebase",{get:function(){return this._firebase},enumerable:!0,configurable:!0}),e.prototype.wrapFirebaseEvent=function(e){return s.FirebaseUtils.wrapFirebaseEvent(this.firebase,e)},e.prototype.on=function(e){return this.wrapFirebaseEvent(e)},Object.defineProperty(e.prototype,"valueRaw",{get:function(){return this.wrapFirebaseEvent("value")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.valueRaw.map(function(e){return e[0].val()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRaw",{get:function(){return this.valueRaw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childAddedRaw",{get:function(){return this.wrapFirebaseEvent("child_added")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childAdded",{get:function(){return this.childAddedRaw.map(function(e){return e[0].val()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childChangedRaw",{get:function(){return this.wrapFirebaseEvent("child_changed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childChanged",{get:function(){return this.childChangedRaw.map(function(e){return e[0].val()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childRemovedRaw",{get:function(){return this.wrapFirebaseEvent("child_removed")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childRemoved",{get:function(){return this.childRemovedRaw.map(function(e){return e[0].val()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childMoved",{get:function(){return this.childMovedRaw.map(function(e){return e[0].val()})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childMovedRaw",{get:function(){return this.wrapFirebaseEvent("child_moved")},enumerable:!0,configurable:!0}),e.prototype.setData=function(e){return s.FirebaseUtils.wrapFirebaseAsyncCall(this.firebase,this.firebase.set,[e]).then(function(){return!0})},e.prototype.set=function(e){return this.setData(e)},e.prototype.updateData=function(e){return s.FirebaseUtils.wrapFirebaseAsyncCall(this.firebase,this.firebase.update,[e]).then(function(){return!0})},e.prototype.update=function(e){return this.updateData(e)},e.prototype.push=function(e){return s.FirebaseUtils.wrapFirebaseAsyncCall(this.firebase,this.firebase.push,[e]).then(function(){return!0})},e.prototype.remove=function(e){var t=this.firebase;return e&&(t=t.child(e)),s.FirebaseUtils.wrapFirebaseAsyncCall(t,this.firebase.remove,[]).then(function(){return!0})},e.prototype.asArray=function(){return new u.FirebaseArray(this)},e.prototype.child=function(t){return new e(this.firebase.child(t))},e=i([a.Injectable(),o(0,a.Inject(c.FirebaseConfig)),n("design:paramtypes",[Object])],e)}();t.FirebaseService=f},function(t,r){t.exports=e},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,a=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(3>o?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},o=r(2),a=function(){function e(e){this.url=e}return e=i([o.Injectable(),n("design:paramtypes",[String])],e)}();t.FirebaseConfig=a},function(e,t,r){"use strict";var i=r(5),n=function(){function e(){}return e.wrapFirebaseAsyncCall=function(e,t,r){return void 0===r&&(r=[]),r=r.slice(),new Promise(function(i,n){function o(e){null!==e?n(e):i(Array.prototype.slice.call(arguments))}r.push(o),t.apply(e,r)})},e.wrapFirebaseEvent=function(e,t){return i.Observable.create(function(r){var i=e.on(t,function(){r.next(Array.prototype.slice.call(arguments))},function(e){r.error(e)});return function(){e.off(t,i)}})},e}();t.FirebaseUtils=n},function(e,r){e.exports=t},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,a=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(3>o?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},o=r(2),a=r(1),c=r(5);(function(){function e(){}return e})();Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),i=r.length>>>0,n=arguments[1],o=0;i>o;o++)if(t=r[o],e.call(n,t,o,r))return t}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),i=r.length>>>0,n=arguments[1],o=0;i>o;o++)if(t=r[o],e.call(n,t,o,r))return o;return-1});var s=function(){function e(e){this.copyArray=!0,this._initialized=!1,this._subject=new c.ReplaySubject(1),this._service=e,this._list=[],this._arr=[],this._init()}return e.prototype.add=function(e){if("undefined"==typeof e||null===e)throw new Error('Cannot add nulls to synchronized array as they cannot be reliably tracked. If you want a "null"-like value, use a special trigger value, such as a custom Unit or Void object.');return this._service.push(e)},e.prototype.remove=function(e){if(null===e)throw new Error("The provided index is invalid. Please make sure that it is in the range of 0 - array.length");return this._service.remove(e.toString())},e.prototype.set=function(e,t){return t.hasOwnProperty("$id")&&delete t.$id,this._service.child(e.toString()).set(t)},e.prototype.indexOfKey=function(t){return this._subject.map(function(r){return e._getPositionFor(t.toString(),r)}).distinctUntilChanged()},e.prototype.indexOf=function(e){return this.observable.map(function(t){return t.indexOf(e)}).distinctUntilChanged()},e.prototype.filter=function(e,t){return this.observable.map(function(r){return r.filter(e,t)})},e.prototype.map=function(e,t){return this.observable.map(function(r){return r.map(e,t)})},e.prototype.find=function(e,t){return this.observable.map(function(r){return r.find(e,t)}).distinctUntilChanged()},e.prototype.findIndex=function(e,t){return this.observable.map(function(r){return r.findIndex(e,t)}).distinctUntilChanged()},e.prototype.subscribe=function(e,t,r){return this.observable.subscribe(e,t,r)},Object.defineProperty(e.prototype,"service",{get:function(){return this._service},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.observable.map(function(e){return e.length}).distinctUntilChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"array",{get:function(){return this.copyArray?e._mapArrayValues(this._list):this._arr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observable",{get:function(){var t=this;return this.copyArray?this._subject.map(e._mapArrayValues):this._subject.map(function(e){return t._arr})},enumerable:!0,configurable:!0}),e._mapArrayValues=function(e){return e.map(function(e){return e.value})},e.prototype._init=function(){this._initialized||(this._subscribeToEvent(this._service.childAddedRaw,this._childAdded.bind(this)),this._subscribeToEvent(this._service.childRemovedRaw,this._childRemoved.bind(this)),this._subscribeToEvent(this._service.childChangedRaw,this._childChanged.bind(this)),this._subscribeToEvent(this._service.childMovedRaw,this._childMoved.bind(this)),this._initialized=!0)},e.prototype._subscribeToEvent=function(e,t){e.subscribe(this._wrap(t),this._subject.error.bind(this._subject),this._subject.complete.bind(this._subject))},e.prototype._wrap=function(e){return function(t){var r=t[0];e.apply(void 0,[r.val(),r.key()].concat(t))}},e._getPositionFor=function(e,t){for(var r=0;r<t.length;r++){var i=t[r];if(i.id===e)return r}return-1},e._getPositionAfter=function(t,r){if(null===t)return 0;var i=e._getPositionFor(t,r);return-1===i?r.length:i+1},e.prototype._emit=function(){this._subject.next(this._list)},e.prototype._childAdded=function(t,r,i,n){var o={value:t,id:r},a=e._getPositionAfter(n,this._list);this._applyChildAdded(a,o)},e.prototype._applyChildAdded=function(e,t){this._list.splice(e,0,t),this._arr.splice(e,0,t.value),this._emit()},e.prototype._childRemoved=function(t,r){var i=e._getPositionFor(r,this._list);this._applyChildRemoved(i)},e.prototype._applyChildRemoved=function(e){e>-1&&(this._list.splice(e,1),this._arr.splice(e,1),this._emit())},e.prototype._childMoved=function(t,r,i,n){var o=e._getPositionFor(r,this._list),a=e._getPositionAfter(n,this._list);this._applyChildMoved(o,a)},e.prototype._applyChildMoved=function(t,r){t>-1&&(e._moveValue(this._list,t,r),e._moveValue(this._arr,t,r),this._emit())},e._moveValue=function(e,t,r){var i=e.splice(t,1)[0];e.splice(r,0,i)},e.prototype._childChanged=function(t,r){var i=e._getPositionFor(r,this._list);this._applyChildChanged(i,t,r)},e.prototype._applyChildChanged=function(e,t,r){e>-1&&(this._list[e]={value:t,id:r},this._arr[e]=t,this._emit())},e=i([o.Injectable(),n("design:paramtypes",[a.FirebaseService])],e)}();t.FirebaseArray=s},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,a=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(3>o?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},o=r(2),a=r(1),c=r(4),s=function(){function e(e){this._firebase=e}return Object.defineProperty(e.prototype,"service",{get:function(){return this._firebase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firebase",{get:function(){return this.service.firebase},enumerable:!0,configurable:!0}),e.prototype.authWithPassword=function(e){return c.FirebaseUtils.wrapFirebaseAsyncCall(this.firebase,this.firebase.authWithPassword,[e]).then(function(e){return e[1]})},e=i([o.Injectable(),n("design:paramtypes",[a.FirebaseService])],e)}();t.FirebaseAuthService=s},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,a=3>o?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(3>o?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},n=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},o=r(2),a=r(1),c=r(3),s=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:c.FirebaseConfig,useValue:t}]}},e=i([o.NgModule({providers:[a.FirebaseService]}),n("design:paramtypes",[])],e)}();t.FirebaseModule=s}])});